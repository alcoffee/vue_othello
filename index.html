<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <script src="./js/bootstrap.min.js"></script>
    <script src="./lib/vue.min.js"></script>
    <title>オセロらしきもの</title>
    <style>
    [v-cloak] {
            display: none;
        }
        table {
            margin: 5px;
            cursor: default;
            font-family: 'ＭＳ Ｐゴシック';
            font-weight: bold;
        }
        p {
            font-family: 'ＭＳ Ｐゴシック';
            font-weight: bold;
        }
        td:hover {
                background-color: rgb(138, 138, 138);
            }
    </style>
</head>
<body>
    <div id="app-othello" v-cloak>
        <table class="table-dark table-bordered float-left">
            <tbody>
                <tr v-for="(line, i) in board">
                    <td class="text-center" v-for="(cell, j) in line" v-on:click="userInput(i, j)" width="25">
                        <span class="text-warning" 
                            v-if="JSON.stringify({y:i, x:j}) === JSON.stringify(getLastPosition(0)) 
                            && auto">
                            {{ printCell(i,j) }}
                        </span>
                        <span v-else>
                            {{ printCell(i,j) }}
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="divider py-1 bg-*"></div>
        
        <div class="container bg-secondary text-white flex-fill " style="padding-left: +210px">
            <p></p>
            <p>
                <span v-if="turn">
                    白
                </span>
                <span v-else>
                    黒
                </span>
                {{ whichIsTurn(turn) }} の手番です
            </p>
            <p>
                <div class="custom-control custom-switch py-1" >
                    <input type="checkbox" class="custom-control-input" id="customSwitch1" v-model="auto">
                    <label class="custom-control-label" for="customSwitch1">
                        <span v-bind:class=auto?"text-warning":"">
                        相手自動化
                        </span>
                    </label>
                </div>
            </p>
            <p>
                黒 {{ whichIsTurn(false) }}
                ： {{ stonePosition(whichIsTurn(false)).length }} 個
            </p>
            <p>
                白 {{ whichIsTurn(true) }}
                ： {{ stonePosition(whichIsTurn(true)).length }} 個
            </p>
            <p v-if="0 === putAblePosition().length"> ＝＝＝終了！！＝＝＝ </p>
            <p v-else> </p>
        </div>
        <div class="clearfix divider py-1 bg-*"></div>
        <button class="btn btn-danger m-1" v-on:click="debugChange(1)">デバッグ</button>
        <div v-if="debug">
            <p> <button v-on:click="putRandPosition"> ランダムな場所に置く </button> </p>
            <p> stonePosition(whichIsTurn(false)).length: {{ stonePosition(whichIsTurn(false)).length }}</p>
            <p> stonePosition(whichIsTurn(true)).length: {{ stonePosition(whichIsTurn(true)).length }}</p>
            <p> turn: {{ turn }} </p>
            <p> whichIsTurn: {{ whichIsTurn(turn) }}</p>
            <p> board: {{ board }} </p>
            <p> history: {{ history }}</p>
            <p> printCell(0, 0): {{ printCell(0, 0) }} </p>
            <p> countArrow(2, 4, 1, 0): {{ countArrow(2, 4, 1, 0) }}</p>
            <p> countEightDirections(2, 4): {{ countEightDirections(2, 4) }}</p>
            <p> putAblePosition(): {{ putAblePosition() }}</p>
            <p> getLastPosition(): {{ getLastPosition() }}</p>
            <p> getLastPosition(): {{ getLastPosition(-1) }}</p>
        </div>
    </div>
    <script src="./vue_othello.js"></script>
</body>